---
import { getCollection } from "astro:content";
import PostLayout from "../../layouts/PostLayout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("posts");
  return posts
    .filter((post) => post.data.archived && !post.data.draft)
    .map((post) => ({
      params: { slug: post.slug },
      props: { post },
    }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<PostLayout frontmatter={post.data}>
  <div class="archive-banner">
    Heads up! This post has been archived, as it either contains outdated
    information was lacking in quality. If you would like me to update the post,
    please contact me to let me know that you are interested. Thanks!
  </div>
  <Content />
</PostLayout>

<style>
  .archive-banner {
    background: rgba(255, 165, 0, 0.1);
    border-left: 4px solid rgba(255, 165, 0, 0.5);
    padding: 0.75rem 1rem;
    margin-bottom: 2rem;
    font-size: 0.9rem;
    border-radius: 0 4px 4px 0;
  }
</style>
