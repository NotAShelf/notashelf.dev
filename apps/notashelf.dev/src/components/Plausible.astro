---
export interface Props {
  domain: string;
  src?: string;
}

declare global {
  interface Window {
    plausible: {
      q?: any[];
      (...args: any[]): void;
      [key: string]: any;
    };
  }
}

const {
  domain = "notashelf.dev",
  src = "https://pl.notashelf.dev/js/script.file-downloads.hash.outbound-links.pageview-props.tagged-events.js",
} = Astro.props;
---

<script defer type="text/partytown" is:inline data-domain={domain} src={src}
></script>
<script>
  const fallback = function (...args: any[]) {
    (window.plausible.q = window.plausible.q || []).push(args);
  };
  window.plausible = window.plausible || fallback;
</script>
