---
interface Props {
  icon: string;
  className?: string;
  class?: string;
  title?: string;
  size?: string;
  loadingStrategy?: "load" | "idle" | "visible" | "media";
}

const {
  icon,
  className = "",
  class: cssClass = "",
  title,
  size = "1em",
  loadingStrategy = "load",
} = Astro.props;

const finalClassName = [className, cssClass].filter(Boolean).join(" ");

// Simple SVG fallbacks for common icons
const iconPaths: Record<string, { viewBox: string; path: string }> = {
  "chevron-down": {
    viewBox: "0 0 448 512",
    path: "M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z",
  },
  "arrow-right": {
    viewBox: "0 0 448 512",
    path: "M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.7 179 32 179c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 348.7c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z",
  },
  "magnifying-glass": {
    viewBox: "0 0 512 512",
    path: "M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z",
  },
  xmark: {
    viewBox: "0 0 384 512",
    path: "M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z",
  },
  "layer-group": {
    viewBox: "0 0 576 512",
    path: "M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z",
  },
  archive: {
    viewBox: "0 0 512 512",
    path: "M32 32H480c17.7 0 32 14.3 32 32V96c0 17.7-14.3 32-32 32H32C14.3 128 0 113.7 0 96V64C0 46.3 14.3 32 32 32zm0 128H480V416c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V160zm128 80c0 8.8 7.2 16 16 16H336c8.8 0 16-7.2 16-16s-7.2-16-16-16H176c-8.8 0-16 7.2-16 16z",
  },
};

const svgData = iconPaths[icon] || iconPaths["chevron-down"]; // Fallback to chevron-down
---

<svg
  class={`fa-icon ${finalClassName}`}
  width={size}
  height={size}
  viewBox={svgData.viewBox}
  fill="currentColor"
  role="img"
  aria-hidden={!title}
  aria-label={title}
  data-icon={icon}
  data-loading={loadingStrategy}
>
  <path d={svgData.path}></path>
</svg>

<style>
  .fa-icon {
    display: inline-block;
    vertical-align: middle;
    transition: all 0.2s ease;
  }
</style>
